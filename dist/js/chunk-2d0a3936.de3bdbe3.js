(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3936"],{"0385":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-col text-xs text-left bg-gray-200"},[s("div",{staticClass:"w-full p-2 bg-blue-300 font-bold"},[e._v(" Cliente ")]),e.cliente?e._e():s("div",{staticClass:"w-full p-2 bg-gray-200 text-center text-xl"},[e._v(" Seleziona un cliente ")]),e.cliente?s("div",{staticClass:"p-1 flex flex-col uppercase h-24"},[s("div",[s("span",{staticClass:"capitalize font-bold"},[e._v(e._s(e.cliente[0].ac_cognome)+" "+e._s(e.cliente[0].ac_nome))])]),s("div",[s("div",[e._v(e._s(e.cliente[0].ac_citta))]),s("span",[e._v(e._s(e.cliente[0].ac_indirizzo))]),s("div",{staticClass:"lowercase flex flex-row items-center"},[s("icon",{staticClass:"text-sm mr-2",attrs:{icon:"email"}}),e._v(e._s(e.cliente[0].ac_email))],1),s("div",{staticClass:" flex flex-row items-center"},[s("icon",{staticClass:"text-sm mr-2",attrs:{icon:"phone"}}),e._v(" "+e._s(e.cliente[0].ac_telefono))],1)])]):e._e(),e.cliente?s("div",{staticClass:"p-1 flex flex-col uppercase "},[s("div",{staticClass:"w-full relative p-2 bg-blue-300 font-bold flex flex-row items-center"},[s("div",[e._v("Azione")]),s("div",{staticClass:"absolute right-0"},[s("icon",{staticClass:"text-white mr-2",attrs:{icon:"add",title:"Aggiungi nuova azione"},on:{click:function(t){return e.addStatus()}}}),s("icon",{staticClass:"text-white mr-2",attrs:{icon:"save",title:"Salva azione corrente"},on:{click:function(t){return e.createStatus()}}}),s("icon",{staticClass:"text-white mr-2",attrs:{icon:"delete",title:"Elimina questa azione"}})],1)]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedProcess,expression:"selectedProcess"}],staticClass:"my-2 w-full p-1",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedProcess=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("Seleziona un processo")]),e._l(e.tables.processi.data,(function(t){return s("option",{domProps:{value:t.id_processo}},[e._v(e._s(t.ac_processo))])}))],2),s("div",{staticClass:"flex flex-row"},[s("datepicker",{attrs:{type:"date",valueType:"format",format:"DD/MM/YYYY",titleFormat:"DD/MM/YYYY"},model:{value:e.actionDate,callback:function(t){e.actionDate=t},expression:"actionDate"}}),s("div",{staticClass:"w-2"}),s("datepicker",{attrs:{type:"time",valueType:"format",format:"HH:mm",titleFormat:"HH:mm",timeTitleFormat:"HH:mm"},model:{value:e.actionTime,callback:function(t){e.actionTime=t},expression:"actionTime"}})],1),s("div",{staticClass:"mt-2"},[e._v("Note")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.selectedNotes,expression:"selectedNotes"}],staticClass:"mb-2 w-full p-1 border h-32",attrs:{placeholder:"Note"},domProps:{value:e.selectedNotes},on:{input:function(t){t.target.composing||(e.selectedNotes=t.target.value)}}}),s("button",{staticClass:"text-xs"},[e._v("Documento")])]):e._e(),e.cliente?s("div",{staticClass:"flex flex-col p-1"},[e._m(0),e._l(e.cliente,(function(t,i){return[s("div",{staticClass:"flex flex-row p-1 border-b items-center cursor-pointer bg-opacity-25",style:"background-color:#"+t.ac_colore,on:{click:function(t){e.index=i}}},[s("div",{staticClass:"w-1/3 flex flex-row items-center"},[s("icon",{staticClass:"text-base -ml-1",class:e.index===i?"text-black":"text-transparent",attrs:{icon:"arrow_right"}}),e._v(e._s(t.data_status)+" ")],1),s("div",{staticClass:"w-1/3"},[e._v(e._s(t.ora_status)+" ")]),s("div",{staticClass:"w-1/3"},[e._v(e._s(t.ac_sigla))])])]}))],2):e._e()])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-row p-1  border border-gray-500 bg-gray-300"},[s("div",{staticClass:"w-1/3"},[e._v("Data")]),s("div",{staticClass:"w-1/3"},[e._v("Ora")]),s("div",{staticClass:"w-1/3"},[e._v("Azione")])])}],l=s("2f62"),c={name:"CustomerStatus",data:()=>({cliente:null,selectedProcess:"",actionDate:null,actionTime:null,selectedNotes:"",index:-1}),props:["id_cliente"],computed:{...Object(l["b"])(["tables"])},methods:{customer(e){this.$api.service("cliente/status").find({query:{id_cliente:e}}).then(e=>{console.log(e),this.index=-1,this.cliente=e[0],this.index=this.cliente.length-1,this.selectedProcess=this.cliente[this.index].id_processo,this.actionDate=this.cliente[this.index].data_status,this.actionTime=this.cliente[this.index].ora_status,this.selectedNotes=this.cliente[this.index].ac_note})},addStatus(){this.selectedProcess=null,this.selectedNotes="nuova azione",this.actionDate=null,this.actionTime=null},createStatus(){let e=!1,t={id_processo:this.selectedProcess?this.selectedProcess:e=!0,id_cliente:this.id_cliente,id_persona:this.cliente[0].id_persona,dt_status:Date.parse(this.actionDate+"T"+this.actionTime),ac_note:this.selectedNotes};console.log(t,e)}},watch:{id_cliente(e){e?(this.customer(e),this.selectedProcess=""):this.cliente=null},index(e){this.selectedProcess=this.cliente[e].id_processo,this.actionDate=this.cliente[e].data_status,this.actionTime=this.cliente[e].ora_status,this.selectedNotes=this.cliente[e].ac_note}}},o=c,n=s("2877"),r=Object(n["a"])(o,i,a,!1,null,null,null);t["default"]=r.exports}}]);